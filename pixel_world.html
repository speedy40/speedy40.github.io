<!DOCTYPE html>
<html> 
  <head>
    <title>Pixel world</title> 
    <style>
        body {
            overflow:hidden;
        margin:0px;
        }
    </style>
  </head>
  <body>
    <canvas id="mycanvas"></canvas> 
  </body>
   <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
  <script>
  var programCode = function(processingInstance) {
    with (processingInstance) {
        var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var screenHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
        
      size(screenWidth, screenHeight); 
      
      // paste code from KA here
      //bee swarm simulator code is: buoyant bee raccoon    

//bee swarm simulator code is: buoyant bee raccoon    

   
   
   var mouseIsPressed = false;
   

   
   
var pixel = function(message, x, y, size, colors, textWidth, textHeight) {
    
    //colors the specified colors
    fill(colors);
    stroke(colors);
    
    //moves to x and y
    pushMatrix();
    translate(x, y);
    
    //shinks to proper size, given most letters are 70 by 70
    scale(size / 70);
    
    var letter; //which letter you are on
    var letterX = -80; //the x pos of that letter (saying x and y are at (0, 0))
    var letterY = 0; //the y pos of that letter (saying x and y are at (0, 0))
    
    //goes through each letter in the string
    for (var a = 0; a < message.length; a ++) {
        
        //letter variable changes to the cooresponding letter
        letter = message.charAt(a);
        
        //x pos increases by 80 to leave a 10 space (w/o scale) 
        letterX += 80;
        
        //checks if the x value of the letter is going to be past the specified maximum
        if (letterX > textWidth*70/size - 80) {
            
            //if so reset it to 0 
            letterX = 0;
            
            //if the letter is a space
            if (letter === " ") {
                
                letterX -= 50; //move the x pos of it back 50 (will move 30 later)
                
            }
            
            letterY += 80; //move a line down (leaving a 10 space)
            
        }
        
        //begin writing
        pushMatrix();
        
        //move to x and y of the specific letter
        translate(letterX, letterY);
        
        if (letter === "a" | letter === "b" | letter === "c" | letter === "d" | letter === "e" | letter === "f" | letter === "g" | letter === "h" | letter === "i" | letter === "j" | letter === "k" | letter === "l" | letter === "m" | letter === "n" | letter === "o" | letter === "p" | letter === "q" | letter === "r" | letter === "s" | letter === "t" | letter === "u" | letter === "v" | letter === "w" | letter === "x" | letter === "y" | letter === "z") {
            
            translate(0, 17);
            scale(0.75);
            
        }
        
        //goes and checks through multiple numbers and symbols
        if (letter === "a" | letter === "A") {
            
            rect(0, 20, 20, 20);
            rect(0, 40, 70, 10);
            rect(0, 50, 20, 20);
            rect(10, 10, 20, 10);
            rect(20, 0, 30, 10);
            rect(40, 10, 20, 10);
            rect(50, 20, 20, 20);
            rect(50, 50, 20, 20);
            
        } else if (letter === "b" | letter === "B") {
            
            rect(0, 0, 60, 10);
            rect(0, 10, 20, 20);
            rect(0, 30, 60, 10);
            rect(0, 40, 20, 20);
            rect(0, 60, 60, 10);
            rect(50, 10, 20, 20);
            rect(50, 40, 20, 20);
            
        } else if (letter === "c" | letter === "C") {
            
            rect(0, 20, 20, 30);
            rect(10, 10, 20, 10);
            rect(10, 50, 20, 10);
            rect(20, 0, 40, 10);
            rect(20, 60, 40, 10);
            rect(50, 10, 20, 10);
            rect(50, 50, 20, 10);
            
        } else if (letter === "d" | letter === "D") {
            
            rect(0, 0, 50, 10);
            rect(0, 10, 20, 50);
            rect(0, 60, 50, 10);
            rect(40, 10, 20, 10);
            rect(40, 50, 20, 10);
            rect(50, 20, 20, 30);
            
        } else if (letter === "e" | letter === "E") {
            
            rect(0, 0, 60, 10);
            rect(0, 10, 20, 20);
            rect(0, 30, 50, 10);
            rect(0, 40, 20, 20);
            rect(0, 60, 70, 10);
            
        } else if (letter === "f" | letter === "F") {
            
            rect(0, 0, 70, 10);
            rect(0, 10, 20, 20);
            rect(0, 30, 60, 10);
            rect(0, 40, 20, 30);
            
        } else if (letter === "g" | letter === "G") {
            
            rect(0, 20, 20, 30);
            rect(10, 10, 20, 10);
            rect(10, 50, 20, 10);
            rect(20, 0, 50, 10);
            rect(20, 60, 50, 10);
            rect(40, 30, 30, 10);
            rect(50, 40, 20, 20);
            
        } else if (letter === "h" | letter === "H") {
            
            rect(0, 0, 20, 30);
            rect(0, 30, 70, 10);
            rect(0, 40, 20, 30);
            rect(50, 0, 20, 30);
            rect(50, 40, 20, 30);
            
        } else if (letter === "i" | letter === "I") {
            
            //enlarged (widened) pixels to create uniformity in width (10 by 11.5)
            rect(0, 0, 70, 10);
            rect(0, 60, 70, 10);
            rect(23, 10, 23, 50);
            
        } else if (letter === "j" | letter === "J") {
            
            rect(0, 50, 20, 10);
            rect(10, 60, 50, 10);
            rect(50, 0, 20, 60);
            
        } else if (letter === "k" | letter === "K") {
            
            rect(0, 0, 20, 30);
            rect(0, 30, 40, 10);
            rect(0, 40, 50, 10);
            rect(0, 50, 20, 20);
            rect(30, 20, 20, 10);
            rect(30, 50, 30, 10);
            rect(40, 10, 20, 10);
            rect(40, 60, 30, 10);
            rect(50, 0, 20, 10);
            
        } else if (letter === "l" | letter === "L") {
            
            rect(0, 0, 20, 60);
            rect(0, 60, 70, 10);
            
        } else if (letter === "m" | letter === "M") {
            
            rect(0, 0, 20, 10);
            rect(0, 10, 30, 10);
            rect(0, 20, 70, 10);
            rect(0, 30, 20, 40);
            rect(30, 30, 10, 10);
            rect(40, 10, 30, 10);
            rect(50, 0, 20, 10);
            rect(50, 30, 20, 40);
            
        } else if (letter === "n" | letter === "N") {
            
            rect(0, 0, 20, 10);
            rect(0, 10, 30, 10);
            rect(0, 20, 40, 10);
            rect(0, 30, 20, 40);
            rect(30, 30, 40, 10);
            rect(40, 40, 30, 10);
            rect(50, 0, 20, 30);
            rect(50, 50, 20, 20);
            
        } else if (letter === "o" | letter === "O") {
            
            rect(0, 10, 20, 50);
            rect(10, 0, 50, 10);
            rect(10, 60, 50, 10);
            rect(50, 10, 20, 50);
            
        } else if (letter === "p" | letter === "P") {
            
            rect(0, 0, 60, 10);
            rect(0, 10, 20, 30);
            rect(0, 40, 60, 10);
            rect(0, 50, 20, 20);
            rect(50, 10, 20, 30);
            
        } else if (letter === "q" | letter === "Q") {
            
            rect(0, 10, 20, 50);
            rect(10, 0, 50, 10);
            rect(10, 60, 40, 10);
            rect(30, 40, 40, 10);
            rect(40, 50, 20, 10);
            rect(50, 10, 20, 30);
            rect(60, 60, 10, 10);
            
        } else if (letter === "r" | letter === "R") {
            
            rect(0, 0, 60, 10);
            rect(0, 10, 20, 30);
            rect(0, 40, 50, 10);
            rect(0, 50, 20, 20);
            rect(30, 50, 30, 10);
            rect(40, 30, 20, 10);
            rect(40, 60, 30, 10);
            rect(50, 10, 20, 20);
            
        } else if (letter === "s" | letter === "S") {
            
            rect(0, 10, 20, 20);
            rect(0, 50, 20, 10);
            rect(10, 0, 40, 10);
            rect(10, 30, 50, 10);
            rect(10, 60, 50, 10);
            rect(40, 10, 20, 10);
            rect(50, 40, 20, 20);
            
        } else if (letter === "t" | letter === "T") {
            
            //just like when widening I, 10 to 11.5
            rect(0, 0, 70, 10);
            rect(23, 10, 23, 60);
            
        } else if (letter === "u" | letter === "U") {
            
            rect(0, 0, 20, 60);
            rect(10, 60, 50, 10);
            rect(50, 0, 20, 60);
            
        } else if (letter === "v" | letter === "V") {
            
            rect(0, 0, 20, 40);
            rect(10, 40, 20, 10);
            rect(20, 50, 30, 10);
            rect(30, 60, 10, 10);
            rect(40, 40, 20, 10);
            rect(50, 0, 20, 40);
            
        } else if (letter === "w" | letter === "W") {
            
            rect(0, 0, 20, 30);
            rect(0, 30, 70, 20);
            rect(0, 50, 30, 10);
            rect(0, 60, 20, 10);
            rect(30, 20, 10, 10);
            rect(40, 50, 30, 10);
            rect(50, 0, 20, 30);
            rect(50, 60, 20, 10);
            
        } else if (letter === "x" | letter === "X") {
            
            rect(0, 0, 20, 10);
            rect(0, 10, 30, 10);
            rect(0, 50, 30, 10);
            rect(0, 60, 20, 10);
            rect(10, 20, 50, 10);
            rect(10, 40, 50, 10);
            rect(20, 30, 30, 10);
            rect(40, 10, 30, 10);
            rect(40, 50, 30, 10);
            rect(50, 0, 20, 10);
            rect(50, 60, 20, 10);
            
        } else if (letter === "y" | letter === "Y") {
            
            //just like I and T, y is widened by a scale of 1.15
            rect(0, 0, 23, 30);
            rect(11.5, 30, 46, 10);
            rect(23, 40, 23, 30);
            rect(46, 0, 23, 30);
            
        } else if (letter === "z" | letter === "Z") {
            
            rect(0, 0, 70, 10);
            rect(0, 50, 30, 10);
            rect(0, 60, 70, 10);
            rect(10, 40, 30, 10);
            rect(20, 30, 30, 10);
            rect(30, 20, 30, 10);
            rect(40, 10, 30, 10);
            
        } else if (letter === "0") {
            
            rect(0, 20, 20, 30);
            rect(10, 10, 10, 10);
            rect(10, 50, 20, 10);
            rect(20, 0, 30, 10);
            rect(20, 60, 30, 10);
            rect(40, 10, 20, 10);
            rect(50, 20, 20, 30);
            rect(50, 50, 10, 10);
            
        } else if (letter === "1") {
            
            //widened like other letters/symbols
            rect(0, 60, 70, 10);
            rect(11.5, 10, 34.5, 10);
            rect(23, 0, 23, 10);
            rect(23, 20, 23, 40);
            
        } else if (letter === "2") {
            
            rect(0, 10, 20, 10);
            rect(0, 50, 20, 10);
            rect(0, 60, 70, 10);
            rect(10, 0, 50, 10);
            rect(10, 40, 20, 10);
            rect(20, 30, 40, 10);
            rect(40, 20, 30, 10);
            rect(50, 10, 20, 10);
            
        } else if (letter === "3") {
            
            rect(0, 0, 70, 10);
            rect(0, 50, 20, 10);
            rect(10, 60, 50, 10);
            rect(20, 30, 40, 10);
            rect(30, 20, 20, 10);
            rect(40, 10, 20, 10);
            rect(50, 40, 20, 20);
            
        } else if (letter === "4") {
            
            rect(0, 30, 20, 10);
            rect(0, 40, 70, 10);
            rect(10, 20, 20, 10);
            rect(20, 10, 40, 10);
            rect(30, 0, 30, 10);
            rect(40, 20, 20, 20);
            rect(40, 50, 20, 20);
            
        } else if (letter === "5") {
            
            rect(0, 0, 60, 10);
            rect(0, 10, 20, 10);
            rect(0, 20, 60, 10);
            rect(0, 50, 20, 10);
            rect(10, 60, 50, 10);
            rect(50, 30, 20, 30);
            
        } else if (letter === "6") {
            
            rect(0, 20, 20, 10);
            rect(0, 30, 60, 10);
            rect(0, 40, 20, 20);
            rect(10, 10, 20, 10);
            rect(10, 60, 50, 10);
            rect(20, 0, 40, 10);
            rect(50, 40, 20, 20);
            
        } else if (letter === "7") {
            
            rect(0, 0, 70, 10);
            rect(0, 10, 20, 10);
            rect(20, 40, 20, 30);
            rect(30, 30, 20, 10);
            rect(40, 20, 20, 10);
            rect(50, 10, 20, 10);
            
        } else if (letter === "8") {
            
            rect(0, 10, 20, 10);
            rect(0, 20, 30, 10);
            rect(0, 40, 10, 20);
            rect(10, 0, 40, 10);
            rect(10, 30, 40, 10);
            rect(10, 60, 50, 10);
            rect(30, 40, 40, 10);
            rect(50, 10, 10, 20);
            rect(50, 50, 20, 10);
            
        } else if (letter === "9") {
            
            rect(0, 10, 20, 20);
            rect(10, 0, 50, 10);
            rect(10, 30, 60, 10);
            rect(10, 60, 40, 10);
            rect(40, 50, 20, 10);
            rect(50, 10, 20, 20);
            rect(50, 40, 20, 10);
            
        } else if (letter === "(") {
            
            rect(0, 20, 20, 30);
            rect(10, 10, 20, 10);
            rect(10, 50, 20, 10);
            rect(20, 0, 20, 10);
            rect(20, 60, 20, 10);
            
        } else if (letter === ")") {
            
            rect(0, 0, 20, 10);
            rect(0, 60, 20, 10);
            rect(10, 10, 20, 10);
            rect(10, 50, 20, 10);
            rect(20, 20, 20, 30);
            
        } else if (letter === "$") {
            
            rect(0, 20, 20, 10);
            rect(10, 10, 50, 10);
            rect(10, 30, 50, 10);
            rect(10, 50, 50, 10);
            rect(30, 0, 10, 10);
            rect(30, 60, 10, 10);
            rect(50, 40, 20, 10);
            
        } else if (letter === ".") {
            
            rect(0, 50, 20, 20);
            
        } else if (letter === ",") {
            
            rect(0, 50, 20, 20);
            rect(0, 80, 10, 10);
            rect(10, 70, 10, 10);
            
        } else if (letter === "!") {
            
            rect(0, 60, 10, 10);
            rect(10, 30, 20, 10);
            rect(10, 40, 10, 10);
            rect(20, 0, 30, 20);
            rect(20, 20, 20, 10);
            
        } else if (letter === "?") {
            
            rect(0, 10, 20, 10);
            rect(10, 0, 50, 10);
            rect(20, 40, 20, 10);
            rect(20, 60, 20, 10);
            rect(30, 30, 30, 10);
            rect(50, 10, 20, 20);
            
        } else if (letter !== " ") { //any other symbols (excluding space)
            
            letterX -= 80; //move it back 80 as if it never happened
            
        }
        
        popMatrix();
        
        //lower case letter spacing
        
        if (letter === "a" | letter === "b" | letter === "c" | letter === "d" | letter === "e" | letter === "f" | letter === "g" | letter === "h" | letter === "i" | letter === "j" | letter === "k" | letter === "l" | letter === "m" | letter === "n" | letter === "o" | letter === "p" | letter === "q" | letter === "r" | letter === "s" | letter === "t" | letter === "u" | letter === "v" | letter === "w" | letter === "x" | letter === "y" | letter === "z") {
            
            letterX -= 18;
            
        }
        
        //exceptions
        if (letter === "(" | letter === ")" | letter === " ") { //with parenthesis or a space
            
            letterX -= 30; //decrease the x of the NEXT letter by 30
            
        } else if (letter === "." | letter === ",") { //period of comma
            
            letterX -= 50; //decrease the x of the NEXT letter by 50
            
        } else if (letter === "!") {
            
            letterX -= 20; //decrease the x of the NEXT letter by 20
            
        }
        
    }
    
    popMatrix();

};
    
// -- IMAGE CONVERTER FUNCTION --
var toImg=function(img,s,t){
	background(0x00ffffff); // transparent background
	s=s||10;// default pixel size
	noStroke(); // for drawing rects later
	for(var x=img[1].length-1;x>=0;x--){ // x positions
		for(var y=img.length-2;y>=0;y--){ // y positions
			t=img[y+1].charCodeAt(x)-97; // use char index to get color index
			if(t>=0){ // don't draw if transparent
				fill(img[0][t]); // draw pixel
				rect(x*s,y*s,s,s);
			}
		}
	}
	return get(0,0,img[1].length*s,(img.length-1)*s); // return complete image
};
// -- IMAGE DATA -- 
var IMG;

    


var backgr = [[color(0,0,151), color(131,251,252), color(0,48,91), color(0,137,125), color(0,198,167), ],
'dddddddddddddddddddddddddddddd',
'ddbbbdddddddddddddddddddddbbbd',
'dddddcccdddddddddddddddddddddd',
'ddddcccccddddddddddddddddccccd',
'eeeeccccceccbbeeeeeeeeeecccccc',
'eeeecccccccccbbbeeeecccecccccc',
'eeeecbbbcccccceccceccccccccccc',
'eccecccccccccccccccccccccbbbcc',
'cccccccccccccccccccbbccccccccc',
'cccccaaccccccccccccccccccccccc',
'cccccaaccccccccccccccccccccccc',
'ccccbbbbcccccccccccccccccbbbcc',
'ccccccccccccccbbcccccccccccccc',
'cccccccccccccccccccccccccccccc',
'cccccccccccccccccccccccccccccc',
'bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',
'ababababababababababababababab',
'bababababababababababababababa',
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa',
];

var blockpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), color(255,255,255), color(230,230,230), ],
'ghhhhgghghh',
'hcgghhhghgh',
'hfhfgghcgfg',
'ffgffhfffff',
'fffffffefff',
'fdfeffffdff',
'ffffffffffd',
'fffffeffcff',
'fffefffffff',
'fffffffdfff',
'ffcffffffff',
];

var playerpng = [[color(100,100,255), color(0,0,80), color(0,255,255), ],
'`aaaaaaaa`',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'abbbbbbbba',
'`aaaaaaaa`',
];

var playereyespng = [[color(100,100,255), color(0,0,80), color(0,255,255), ],
'``````````',
'``````````',
'``cc``cc``',
'``cc``cc``',
'``````````',
'``````````',
'``cccccc``',
'``cccccc``',
'``````````',
'``````````',
];


var lavapng=[[color(255,157,0), color(255,116,0), color(250,60,0), color(222,46,0), color(50,50,50), ],
'baabddbcbabccc',
'cbaabccdbabcdc',
'ccbbcddccbddcb',
'bdccdcccdcccba',
'bcdcbdcdcccdba',
'bcdbabdcbcccba',
'cdbaabcbabbccb',
'cccbabdbaabccc',
'ccccbddbaabccc',
'dccdcdccbbddcc',
'cdccdddccccdbb',
'bcdcdcbcdcdbaa',
'ddcdcbabcdccbb',
'dbbddbabcbdccc',
];

var spikepng = [[color(40,40,40), color(50,50,50), color(60,60,60), color(70,70,70), color(80,80,80), color(90,90,90), color(100,100,100), color(110,110,110), color(120,120,120), color(130,130,130), ],
'````jj````',
'````ii````',
'```hhhh```',
'```gggg```',
'``ffffff``',
'``eeeeee``',
'`dddddddd`',
'`cccccccc`',
'bbbbbbbbbb',
'aaaaaaaaaa',
];


var dirtpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), ],
'cfffcfcefcf',
'fcfefffffff',
'fefffefcfef',
'ffffeffffff',
'fffffffefff',
'fdfeffffdff',
'ffffffffffd',
'fffffeffcff',
'fffefffffff',
'fffffffdfff',
'ffcffffffff',
];

var healblockpng = [[color(0,255,0,200), color(0,255,0,180), color(0,255,0,160), color(0,255,0,140), color(0,255,0,120), color(0,255,0,100), color(0,255,0,80), color(0,255,0,60), color(0,255,0,40), color(0,255,0,20), ],
'jjjjjjjajj',
'iiiiiiaaai',
'hhahhhhahh',
'gaaagggggg',
'ffafffffff',
'eeeeeeeaee',
'ddddddaaad',
'cccccccacc',
'bbbbbbbbbb',
'aaaaaaaaaa',
];
var portalpng =[[color(0,0,0), color(255,0,0), color(255,255,255), ],
'```aaaa```',
'`aacccbaa`',
'`acbbbcba`',
'acbcccbcba',
'abcbbcbcba',
'abcbcbbcba',
'abcbcccbca',
'`abcbbbca`',
'`aabcccaa`',
'```aaaa```',
];
var leftbtnpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), ],
'ffffffffff',
'feeeeeeeef',
'feeeeeffef',
'feeeffffef',
'feffffffef',
'feffffffef',
'feeeffffef',
'feeeeeffef',
'feeeeeeeef',
'ffffffffff',
];
var rightbtnpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), ],
'ffffffffff',
'feeeeeeeef',
'feffeeeeef',
'feffffeeef',
'feffffffef',
'feffffffef',
'feffffeeef',
'feffeeeeef',
'feeeeeeeef',
'ffffffffff',
];
var upbtnpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), ],
'ffffffffff',
'feeeeeeeef',
'feeeffeeef',
'feeeffeeef',
'feeffffeef',
'feeffffeef',
'feffffffef',
'feffffffef',
'feeeeeeeef',
'ffffffffff',
];
var mobilepcpng = [[color(50,50,50), color(100,100,100), color(0,0,130), color(0,137,125), color(0,198,167), color(0,0,92), ],
'ffffffffff',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'feeeeeeeef',
'ffffffffff',
];
var thumnail=[[color(100,100,255), color(0,0,80), color(0,255,255), color(0,0,0), ],
'daaaaaaaad',
'abbbbbbbba',
'abccbbccba',
'abccbbccba',
'abbbbbbbba',
'abbbbbbbba',
'abccccccba',
'abccccccba',
'abbbbbbbba',
'daaaaaaaad',
];
var santahat_png = [[color(255,255,255), color(200,200,200), color(230,0,0), color(150,0,0), ],
'```ab`````',
'```ba`````',
'````dd````',
'```dccd```',
'``dccccd``',
'`dccccccd`',
'dccccccccd',
'dddddddddd',
'bbbbbbbbbb',
'aaaaaaaaaa',
];
var santahat2_png = [[color(255,255,255), color(200,200,200), color(230,0,0), color(150,0,0), ],
'`````ba```',
'`````ab```',
'````dd````',
'```dccd```',
'``dccccd``',
'`dccccccd`',
'dccccccccd',
'dddddddddd',
'bbbbbbbbbb',
'aaaaaaaaaa',
];
var healthbar_png = [[color(50,50,50), color(150,150,150), color(255,255,255), color(255,50,50), color(255,150,50), color(255,255,100), color(170,255,100), color(50,200,100), color(150,220,255), color(80,120,220), color(180,120,255), color(150,100,50), ],
'hhhhhhhhhh',
'gggggggggg',
];
var healthbar2_png = [[color(50,50,50), color(150,150,150), color(255,255,255), color(255,50,50), color(255,100,100), color(255,255,100), color(170,255,100), color(50,200,100), color(150,220,255), color(80,120,220), color(180,120,255), color(150,100,50), ],
'dddddddddd',
'eeeeeeeeee',
];
var leveldisplay_png = [[color(50,50,50), color(150,150,150), color(255,255,255), color(255,50,50), color(255,150,50), color(255,255,100), color(170,255,100), color(50,200,100), color(150,220,255), color(80,120,220), color(180,120,255), color(150,100,50), ],
'iiiiiiiiii',
'jjjjjjjjjj',
];
leveldisplay_png = toImg(leveldisplay_png);
healthbar2_png = toImg(healthbar2_png);
healthbar_png = toImg(healthbar_png);
santahat_png = toImg(santahat_png);
santahat2_png = toImg(santahat2_png);
thumnail=toImg(thumnail,20);
mobilepcpng = toImg(mobilepcpng);
upbtnpng = toImg(upbtnpng );
 rightbtnpng = toImg(rightbtnpng);
leftbtnpng = toImg(leftbtnpng);
portalpng = toImg(portalpng);
healblockpng = toImg(healblockpng);
dirtpng = toImg(dirtpng);
playereyespng = toImg(playereyespng);
spikepng = toImg(spikepng);
lavapng = toImg(lavapng);
blockpng = toImg(blockpng);
backgr = toImg(backgr,20);
playerpng = toImg(playerpng);

background(255,255,255);
var Button = function(config) {
    this.x = config.x || 0;
    this.y = config.y || 0;
    this.width = config.width || 150;
    this.height = config.height || 50;
    this.label = config.label || "Click";
    this.onClick = config.onClick || function() {};
};

Button.prototype.draw = function() {
    fill(0, 234, 255);
   
    fill(0, 0, 0);
    textSize(19);
    textAlign(LEFT, TOP);
    text(this.label, this.x+10, this.y+this.height/4);
};

Button.prototype.isMouseInside = function() {
    return mouseX > this.x &&
           mouseX < (this.x + this.width) &&
           mouseY > this.y &&
           mouseY < (this.y + this.height);
};

Button.prototype.handleMouseClick = function() {
    if (this.isMouseInside()) {
        this.onClick();
    }
};





var mobile = false;
//tells which level is in use
var level = 0;
//holds the data for each level
var levels = [

[
    "                  ",
    "                  ",
    "@                 ",
    "bb                ",
    "                  ",
    "  b               ",
    "  dbbb  bbb       ",
    "    d    d        ",
    "           b      ",
    "             b    ",
    "                  ",
    "           b      ",
    "                  ",
    "  p          b    ",
    " bbb    bbb       ",
    "bdddb  bdddb      ",
    " ddd    ddd       ",
    "                  ",
],

[
    "bbbbbbbbbbbbbbbbbb",
    "d@     lll       d",
    "db     bbbb      d",
    "dl bbb llld bb   d",
    "dllllllllld      d",
    "dbbbbbbbbbdbbbb  d",
    "dddddddddddd     d",
    "ddddddddd      b d",
    "dddd             d",
    "ddd             bd",
    "dd               d",
    "d         blllb  d",
    "d     bbb ddddd  d",
    "d      d         d",
    "d bbb            d",
    "dp d             d",
    "dbsssssssssssssssd",
    "ddbbbbbbbbbbbbbbbd",
],

[
    "                  ",
    "                 s",
    "                @b",
    "                bd",
    "              b   ",
    "     b    b  bd   ",
    "  b               ",
    "                  ",
    "b                 ",
    "s       bbb       ",
    "bb      lll       ",
    "         l   bb   ",
    "    bb      bddb  ",
    "     d      lddl  ",
    "bb   d   bbbllll  ",
    "d   bd  bddd ll   ",
    "dp      lldd l    ",
    "db       lll      ",
],

[
    "                  ",
    "                  ",
    "        bb        ",
    "     bb     bb    ",
    "                  ",
    "        bb     bb ",
    "     bb         b ",
    "                b ",
    "        bb      b@",
    "     bb          b",
    "  b               ",
    "b                 ",
    "                  ",
    "  b               ",
    "b                 ",
    "                  ",
    "p b               ",
    "b                 ",
],

[
    "                  ",
    "                  ",
    "       bb  bb     ",
    "    b             ",
    "                  ",
    "    bb       bbb  ",
    "       b      @   ",
    "              b bb",
    "        b         ",
    "                  ",
    "       b          ",
    "                  ",
    "       bb         ",
    "   bb             ",
    "bb                ",
    "                  ",
    "p  bb             ",
    "bb                ",
],

[
    "                  ",
    "                bl",
    "               b  ",
    "              b@  ",
    "   b   b     sdbbb",
    "           bbbllll",
    " b   b   b     lll",
    "                ll",
    "b                l",
    "                  ",
    " b                ",
    "      hh          ",
    "b     bb      bb  ",
    "    ss  ss  ss    ",
    "bb  bb  bb  bb  bb",
    "                  ",
    "p              bb ",
    "bb  bb  bb  bb    ",
],

[
    "bb@            bbb",
    "d b b            d",
    "d        bb  b   d",
    "d     bb       b d",
    "d                d",
    "d               bd",
    "d                d",
    "d    b   b    b  d",
    "d                d",
    "db               d",
    "d                d",
    "d   b            d",
    "db               d",
    "d                d",
    "d  b             d",
    "d                d",
    "dpbsllslhlsllslhld",
    "dbbbbbbbbbbbbbbbbd",
],

[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d                            d",
    "d    b  b  b    bb      bb   d",
    "d   bl  l  l    ll      ll b@d",
    "d   l b  b   bb   b   b    lbd",
    "d b   l  l   ll   l   l     ld",
    "dpl                          d",
    "db                           d",
    "dssssssssssssssssssssssssssssd",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],

[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d                            d",
    "d     b b   b       bb    bb@d",
    "d  bb     b        b    b   bd",
    "d              b             d",
    "d    bb      b   b    b      d",
    "d                            d",
    "d  bb                        d",
    "dpsssssssssssssssssssssssssssd",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],

[
    "bbbbbbbbbbbbbbbbbb",
    "d                d",
    "d                d",
    "d       b        d",
    "d     bbdbb      d",
    "d     ddddd      d",
    "d@   bdddddb     d",
    "db   ddddddd     d",
    "dbbbbbbbbbbbbbb  d",
    "d    l   l hh    d",
    "d  l   l        sd",
    "d  bbbbbbbbbbbbbbd",
    "d b  b   b       d",
    "d      b   b hh  d",
    "dbbbbbbbbbbbbbb  d",
    "d           s    d",
    "dp shhlhlhl     sd",
    "dbbbbbbbbbbbbbbbbd",
],

[
    "bbbbbbbbbbbbbbbbbb",
    "d     d          d",
    "d     d    h     d",
    "db b  d    b     d",
    "d  d  d  b d     d",
    "d bd  d    ds   sd",
    "d  d  db   d     d",
    "db ds d    d s   d",
    "d  d  d  b d     d",
    "d bd  d    d     d",
    "d  d  db   d     d",
    "db d  d   sds   sd",
    "d  d  d  bbd     d",
    "d bd  d  lld s   d",
    "d  d sdb  ld     d",
    "db d  d   ld     d",
    "dp d    blld@hhshd",
    "dbbdbbbbbbbbbbbbbd",
],


[
    "bbbbbbbbbbbbbbbbbb",
    "d                d",
    "d              @ d",
    "d    b  bb    bb d",
    "d                d",
    "d  b b     bb    d",
    "db               d",
    "d b b b          d",
    "d       b        d",
    "d                d",
    "d        b       d",
    "d                d",
    "d       b        d",
    "d    bb          d",
    "d    d           d",
    "d bb             d",
    "dp dsllsllsllsllsd",
    "dbbbbbbbbbbbbbbbbd",
],
[
    "    b   b   b  ",
    "            d  ",
    "bb          ds ",
    "d  b        d  ",
    "d    bb     d  ",
    "d       b   d  ",
    "d         b ds ",
    "d           d  ",
    "d       bbb d  ",
    "d      s    d  ",
    "d     bb    d  ",
    "dp    ddlllld s",
    "dbbbllddssssd @",
    "ddddbbddbbbbdbb",
    "ddddddddddddddd",
],

[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d                 dd          d  @d",
    "d                 d  bbs      d  bd",
    "d                 ds   bb   s d b d",
    "d                 ddbb   d bb d   d",
    "d                  d   s d    db  d",
    "d               bb d  bb ds  bd  bd",
    "d           hhs    db    d s  d   d",
    "dp    s     bbb   bd     d bb db  d",
    "db   bb  b         d b   d   hd   d",
    "ddlllddssd         d     d s bd  bd",
    "ddlllddbbd         d   b d b  d   d",
    "ddlllddll          d     d    db  d",
    "ddlllddll    ss  s   bhhbd  s h  bd",
    "ddbbbddbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
   
],

[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d         ddlllldd       d       @d",
    "d         ddlllldd       d      bbd",
    "d         ddlllldd       d  bsb lld",
    "d         dd    dd       d   s  lld",
    "d         dd    dd       d b     ld",
    "d         dd    dd       d        d",
    "d                    hh  db    ss d",
    "d                    bb  d     bb d",
    "d     s   bb    bb   dds d b  sllsd",
    "d    bb   dd    ddlllddb d    bllbd",
    "d    dd   dd    ddlllddl db    ss d",
    "d bb ddllldd    ddlllddl       bb d",
    "dpsssddlllddssssddlllddl   b  ssssd",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],


[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d                                 d",
    "d                                 d",
    "d                            b  b d",
    "d                         s  dssd d",
    "d                   b    bbb dbbd d",
    "d                  s              d",
    "d      s    s     bb              d",
    "d     bb    bb  b                @d",
    "d  b  ddllllddhhd                bd",
    "db dssddllllddbbd                 d",
    "d  dbbddllllddddd                 d",
    "d bdddddllllddddd                 d",
    "dp dddddlllldddddsssssssssssssssssd",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],

 
    
[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d              h                  d",
    "d              b                  d",
    "d                 b               d",
    "d               b d b   b     b   d",
    "d                 d               d",
    "d             lb  d   b     b     d",
    "d             b   d             s d",
    "d   s   s bhhb    d             b@d",
    "d   b   b  bb     d             dbd",
    "dbb               d               d",
    "d                 d               d",
    "d bb              d               d",
    "dpssssssssssssssssdsssssssssssssssd",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],


[
    "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
    "d                            d",
    "d                            d",
    "d                            d",
    "d                            d",
    "d b  bllb  bhhb  b  bllb  b  d",
    "d    dlld@@dhhdssdlldlld bd@@d",
    "db   dlld@@dhhdssdlldlld bd@@d",
    "d    dlld@@dhhdssd  dhhd  d@@d",
    "d b  dddd@@dhhdssd  dhhdb d@@d",
    "d    dddd@@dhhdssdssdhhdb d@@d",
    "db   dddd  dhhdssd  dhhd  d@@d",
    "d    dddd  dhhdssd  dhhd bd  d",
    "dbb  dddd  dhhdssd  d  d bd  d",
    "d    dddd  dhhdssd  dlld  d  d",
    "d  b dddd  dhhdssd  dlldb d  d",
    "dp d ddddssdssdssd  dl@dbsdlld",
    "dbbbbbbbbbbbbbbbbbbbbbbbbbbbbd",
],

[
    "bbbbbbbbbbbbbbbbbb",
    "d         ddd    @",
    "d   b bdd ddd    d",
    "d     d    dd  b d",
    "d    bddd  ddb   d",
    "db    d    dd    d",
    "dl  b dld ddd b  d",
    "dl    dd   dd   bd",
    "dl   bdss sdd    d",
    "dbbb  dbb bddbbb d",
    "d    ld   sdd    d",
    "d  bbld  bbddb  bd",
    "d    lds   dd    d",
    "dbb  ldbb  dd bb d",
    "d    ld    dd    d",
    "d  bbldb  bdd   bd",
    "dp llld shhhh  bdd",
    "dbbbbbdbbbbbbbbddd",
],

];



//telling when keys are pressed
{
//an array that tells what key(s) are being pressed
var key_pressed = [];

/*
    each key has a different code for example space bar is 32.
    when the space bar is pressed the thirty secound attribute
    equels true. when the space bar is released it deletes the         thirty secound's attribute from the array.
    
    I could make it where it make the attribute equal false. but      it's then holding a usless attribute. so I prefer to just         delete it from the array. (I learned this from Dominic R.)
*/

//make a pressed key equal true and a realesed key get deleted.
keyPressed = function(){
    key_pressed[keyCode] = true;
};
keyReleased = function(){
    delete key_pressed[keyCode];
};
}

//Player Constructor
{
/* 
    you can call the varaibles in the object like this:
    println(player.x);
    or like:
    println(player.speedy);
*/
var Player = function(x, y, speedx, speedy, canJump, overallSpeed, health,eyex,eyey){
    this.x = x;
    this.y = y;
    this.speedx = speedx;
    this.speedy = speedy;
    this.canJump = canJump;
    this.overallSpeed = overallSpeed;
    this.health = health;
    this.eyex = eyex;
    this.eyey = eyey;
};
//the placement of the player
Player.prototype.place = function() {
        for ( var i = 0; i < levels[level].length; i++){
            for ( var j = 0; j < levels[level][i].length; j++){
                if(levels[level][i][j] === "p"){
                    this.x = j*50;
                    this.y = i*50;
                }
            }
        }
    };
    var hat = 0;
//the drawing of the player
Player.prototype.draw = function() {
    pushMatrix();
    translate(this.x,this.y);
    
    image(playerpng,0,0,50,50);
    image(playereyespng,this.eyex,this.eyey,50,50);
    this.eyey = 0;
    this.eyex = 0;
    if(key_pressed[UP]) {
       this.eyey -= 5;
    }
     if(key_pressed[RIGHT]){
       this.eyex += 5;
       hat = 1;
       
    }
    if(hat===0) {
        image(santahat2_png,0,-45,50,50);
    }
    if(hat===1) {
        image(santahat_png,0,-45,50,50);
    }
    
    
        
    
    if(key_pressed[LEFT]){
        
         this.eyex -= 5;
         hat = 0;
    }
    if(key_pressed[DOWN]) {
     this.eyey += 5;
    }
    
    
    popMatrix();
};
//the movement of the player
Player.prototype.move = function() {
    
    //when th up key is pressed
    if(key_pressed[UP] && this.canJump){
         
        //the Y speed equals nagitve the overall speed x 3
        this.speedy = -this.overallSpeed*3;
        //and canJump equals false
        this.canJump = false;
       
    }
   
    //if the up key isn't pressed and the player can't jump
    else{
        //the y speed gets 0.8 added to it every frame
        this.speedy += 0.8;
        //and canJump equals false
        this.canJump = false;
    }
    
    //if the right key is pressed
    if(key_pressed[RIGHT]){
        //lerp x speed to to the overall speed
        this.speedx = lerp(this.speedx, this.overallSpeed, 0.2);
       
    }
    //if the left key is pressed
    else if(key_pressed[LEFT]){
        //lerp x speed to to nagitive the overall speed
        this.speedx = lerp(this.speedx, -this.overallSpeed, 0.2);
        
    }
    //if niether of these keys ar pressed
    else{
        //lerp x speed to to 0
        this.speedx = lerp(this.speedx, 0, 0.2);
    }
    
    //the x position is getting the x speed added to it everyframe
    this.x += this.speedx;
    //the y position is getting the y speed added to it everyframe
    this.y += this.speedy;
};


//create the player object
var player = new Player(100, 100, 0, 0, false, 5, 100);

//place the player in the level
player.place();
}

//calling vars to use in block Constructor
var CreateLevel;

//Block Constructor
{
//holds all the blocks
var blocks = [];    
    
var Block = function(x,y){
    this.x = x;
    this.y = y;    
};
//draw blocks
Block.prototype.draw = function() {
    pushMatrix();
    translate(this.x,this.y);
    
  image(blockpng,0,0,50,50);

    
    popMatrix();
};
//collides blocks with player
Block.prototype.collide = function() {
    
            //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+50 > this.x && player.x < this.x+50 && player.y+50 > this.y && player.y < this.y+50){
                    
                    /*
                    does the same thing as the if stamement above
                    but has the X speed subtracted from the X     
                    position and the Y speed added to the Y 
                    position
                    */
                    if(player.x-player.speedx+50 > this.x && player.x-player.speedx < this.x+50 && player.y+player.speedy+50 > this.y && player.y+player.speedy < this.y+50){
                        /*
                        if the Y speed is greater than 0 
                        AKA if the player is headed down
                        */
                        if(player.speedy > 0){
                            //make the player stop at the top of the block
                            player.y = this.y-50;
                            //make the Y speed equal 0
                            player.speedy = 0;
                            //make the player able to jump
                            player.canJump = true;
                        }
                        /*
                        if the Y speed is less than 0 
                        AKA if the player is headed up
                        */
                        else if(player.speedy < 0){
                            //make the player stop at the bottom of the block
                            player.y = this.y+50;
                            //make the Y speed equal 0
                            player.speedy = 0;
                        }
                    }
                    /*
                    does the same thing as the first if stamement 
                    but has the X speed added from the X     
                    position and the Y speed subtracted to the Y 
                    position
                    */
                    if(player.x+player.speedx+50 > this.x && player.x+player.speedx < this.x+50 && player.y-player.speedy+50 > this.y && player.y-player.speedy < this.y+50){
                        /*
                        if the X speed is greater than 0 
                        AKA if the player is headed Right
                        */
                        if(player.speedx > 0){
                            /*
                            make the player stop at the
                            right side of the block
                            */
                            player.x = this.x-50;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                        /*
                        if the X speed is less than 0 
                        AKA if the player is headed Left
                        */
                        else if(player.speedx < 0){
                            /*
                            make the player stop at the
                            left side of the block
                            */
                            player.x = this.x+50;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                    }
                }
            }
};




var dirt = function(x,y) {
  this.x = x;
  this.y = y;
};

dirt.prototype.draw = function() {
     pushMatrix();
    translate(this.x,this.y);
    
  image(dirtpng,0,0,50,50);

    
    popMatrix();
};

dirt.prototype.collide = function() {
  
  
            //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+50 > this.x && player.x < this.x+50 && player.y+50 > this.y && player.y < this.y+50){
                    
                    /*
                    does the same thing as the if stamement above
                    but has the X speed subtracted from the X     
                    position and the Y speed added to the Y 
                    position
                    */
                    if(player.x-player.speedx+50 > this.x && player.x-player.speedx < this.x+50 && player.y+player.speedy+50 > this.y && player.y+player.speedy < this.y+50){
                        /*
                        if the Y speed is greater than 0 
                        AKA if the player is headed down
                        */
                        if(player.speedy > 0){
                            //make the player stop at the top of the block
                            player.y = this.y-50;
                            //make the Y speed equal 0
                            player.speedy = 0;
                            //make the player able to jump
                            player.canJump = true;
                        }
                        /*
                        if the Y speed is less than 0 
                        AKA if the player is headed up
                        */
                        else if(player.speedy < 0){
                            //make the player stop at the bottom of the block
                            player.y = this.y+50;
                            //make the Y speed equal 0
                            player.speedy = 0;
                        }
                    }
                    /*
                    does the same thing as the first if stamement 
                    but has the X speed added from the X     
                    position and the Y speed subtracted to the Y 
                    position
                    */
                    if(player.x+player.speedx+50 > this.x && player.x+player.speedx < this.x+50 && player.y-player.speedy+50 > this.y && player.y-player.speedy < this.y+50){
                        /*
                        if the X speed is greater than 0 
                        AKA if the player is headed Right
                        */
                        if(player.speedx > 0){
                            /*
                            make the player stop at the
                            right side of the block
                            */
                            player.x = this.x-50;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                        /*
                        if the X speed is less than 0 
                        AKA if the player is headed Left
                        */
                        else if(player.speedx < 0){
                            /*
                            make the player stop at the
                            left side of the block
                            */
                            player.x = this.x+50;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                    }
                }
            }
    
};

var Lava = function(x,y){
    this.x = x;
    this.y = y;    
};
//draw blocks
Lava.prototype.draw = function() {
    pushMatrix();
    translate(this.x,this.y);
   
   image(lavapng,0,0,50,50);

  popMatrix();
  
};
//collides blocks with player
Lava.prototype.collide = function() {
    
            //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+50 > this.x && player.x < this.x+50 && player.y+49 > this.y && player.y < this.y+50){
                    
                    player.health -= 1;
                    
                }
            }
};

var healblock = function(x,y) {
    
    this.x = x;
    this.y = y;
    
};

healblock.prototype.draw = function() {
    
        pushMatrix();
    translate(this.x,this.y);
   
   image(healblockpng,0,0,50,50);

  popMatrix();
    
};

healblock.prototype.collide = function() {
  
  
            //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+50 > this.x && player.x < this.x+50 && player.y+49 > this.y && player.y < this.y+50&&player.health < 100){
                    
                    player.health += 1;
                    
                }
            }
    
};

var spike = function(x,y) {
  
  this.x = x;
  this.y = y;
    
};

spike.prototype.draw = function() {
  
   pushMatrix();
    translate(this.x,this.y);
   
   image(spikepng,0,0,50,50);

  popMatrix();
    
};

spike.prototype.collide = function() {
  
  //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+40 > this.x && player.x < this.x+40 && player.y+30 > this.y && player.y < this.y+30){
                    
                    player.health -= 10;
                    
                    /*
                    does the same thing as the if stamement above
                    but has the X speed subtracted from the X     
                    position and the Y speed added to the Y 
                    position
                    */
                    if(player.x-player.speedx+40 > this.x && player.x-player.speedx < this.x+40 && player.y+player.speedy+30 > this.y && player.y+player.speedy < this.y+30){
                        /*
                        if the Y speed is greater than 0 
                        AKA if the player is headed down
                        */
                        if(player.speedy > 0){
                            //make the player stop at the top of the block
                            player.y = this.y-30;
                            //make the Y speed equal 0
                            player.speedy = 0;
                            //make the player able to jump
                            player.canJump = true;
                        }
                        /*
                        if the Y speed is less than 0 
                        AKA if the player is headed up
                        */
                        else if(player.speedy < 0){
                            //make the player stop at the bottom of the block
                            player.y = this.y+30;
                            //make the Y speed equal 0
                            player.speedy = 0;
                        }
                    }
                    /*
                    does the same thing as the first if stamement 
                    but has the X speed added from the X     
                    position and the Y speed subtracted to the Y 
                    position
                    */
                    if(player.x+player.speedx+40 > this.x && player.x+player.speedx < this.x+40 && player.y-player.speedy+30 > this.y && player.y-player.speedy < this.y+30){
                        /*
                        if the X speed is greater than 0 
                        AKA if the player is headed Right
                        */
                        if(player.speedx > 0){
                            /*
                            make the player stop at the
                            right side of the block
                            */
                            player.x = this.x-40;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                        /*
                        if the X speed is less than 0 
                        AKA if the player is headed Left
                        */
                        else if(player.speedx < 0){
                            /*
                            make the player stop at the
                            left side of the block
                            */
                            player.x = this.x+40;
                            //make the players X speed equal 0
                            player.speedx = 0;
                        }
                    }
                }
            }
           
    
};


var Portal = function(x,y,animation){
    this.x = x;
    this.y = y;    
    this.animation = animation;
};
//draw blocks
Portal.prototype.draw = function() {
    pushMatrix();
    translate(this.x,this.y);
  
  image(portalpng,0,0,50,50);
  
    popMatrix();
    
};
//collides blocks with player
Portal.prototype.collide = function() {
    
            //collisions with player
            {
                //tells if player is overlapping with block
                if(player.x+50 > this.x && player.x < this.x+50 && player.y+50 > this.y && player.y < this.y+50){
                    this.animation = lerp(this.animation, 260, 0.02);
                    if(this.animation > 250){
                    //make it the next level
                    level = level+1;
                    
                    //reset player
                    player.place();
                    player.health = 100;
                    player.speedx = 0;
                    player.speedy = 0;
                    
                    //reset level's blocks
                    blocks = [];
                    CreateLevel();
                    }
                    
                }
                else{
                    this.animation = lerp(this.animation, 0, 0.05);
                }
            }
};
}

/* create levels */
{
var CreateLevel = function(){
    /*
        this runs through every single block and pushes a block           object into the blocks array.
    */
    for ( var i = 0; i < levels[level].length; i++){
        for ( var j = 0; j < levels[level][i].length; j++){
            switch(levels[level][i][j]){
                case "b":
                    //basic block
                    blocks.push(new Block(j*50, i*50));
                    
                break;
                case "l":
                    //basic block
                    blocks.push(new Lava(j*50, i*50));
                break;
                case "@":
                    //basic block
                    blocks.push(new Portal(j*50, i*50,0));
                break;
                case "s":
                    blocks.push(new spike(j*50,i*50,0));
                break;
                case "d":
                    blocks.push(new dirt(j*50,i*50,0));
                break;
                case "h":
                    blocks.push(new healblock(j*50,i*50,0));
                break;
                
               
            }
        }
    }

}; 

CreateLevel();
}

var btn1 = new Button({
    
    x: 5,
    y: 35,
    width: 50,
    height: 50,
    label: " ",
    onClick: function() {
      
      if(mobile===false) {
       mobile=true;   
      }
      else {
          mobile=false;
      }
        
    },
    
    });

//draw the game
draw = function() {
    
   image(backgr,0,0,width,height);
    
btn1.draw();

   mousePressed = function() {
   mouseIsPressed = true;    
   };
   mouseReleased = function() {
   mouseIsPressed = false;    
   };
   
    pushMatrix();
    //this keeps the player centered
    translate(round(-player.x+width/2), round(-player.y+height/2));
    
    //draw/move player
    player.draw();
    player.move();
    
    /*
    if playerhealth is less than or equal to 0 or if "r" is pressed
    */
    if(player.health <= 0 || key_pressed[82]){
        //reset the level
        player.place();
        player.health = 100;
        player.speedx = 0;
        player.speedy = 0;
    }

    
    //draw blocks
    for (var i = 0; i < blocks.length; i++){
        blocks[i].draw();
        if(dist(player.x+25,player.y+25,blocks[i].x+25,blocks[i].y+25) <= 100){
            blocks[i].collide();
        }

    }
    popMatrix();
    
    
    //health bar
    pushMatrix();
    fill(255, 0, 0);
    image(healthbar2_png,5,5,290,25);
    fill(0, 255, 47);
    image(healthbar_png,5,5,player.health*2.9,25);
    fill(0);
   textSize(20);
    text("HP: "+player.health+"/100",85,5);
    popMatrix();
    
    
    
    var w = level+1;
    //level display
    pushMatrix();
    textSize(20);
    image(leveldisplay_png,60,35,145,25);
    text("Level: "+w,60,35);
    
    popMatrix(); 
     
     
     
     
     var buttons = function(lbx,lby,rbx,rby,ubx,uby,w,h) {
    //buttons
    
    //left
    image(leftbtnpng,lbx,lby,w,h);
    if(mouseIsPressed && mouseX > lbx && mouseY > lby && mouseX < lbx+w && mouseY < lby+h) {
        
        key_pressed[LEFT] = true;
        
    }
    else {
        key_pressed[LEFT] = false;
    }
    
    //right
   image( rightbtnpng,rbx,rby,w,h);
    if(mouseIsPressed && mouseX > rbx && mouseX < rbx+w && mouseY > rby && mouseY < rby + w) {
     
     key_pressed[RIGHT] = true;
        
    }
    else {
        
     key_pressed[RIGHT] = false;
     
    }
    //up
   image(upbtnpng ,ubx,uby,w,h);
    if(mouseIsPressed && mouseX > ubx && mouseX < ubx+w && mouseY > uby && mouseY < uby+h) {
     
     key_pressed[UP] = true;
        
    }
    else {
        
        key_pressed[UP] = false;
        
    }
    };
    if(mobile === true) {
        buttons(width/60,height/1.175,width/5.45454545455,height/1.17647058824,width/1.11111111111,height/1.17647058824,width/12,height/8);
    }
    
    if(player.y > 1000 === true) {
     key_pressed[82] = true; 
     
    }
    else {
        key_pressed[82] = false;
    }
    
    //mobile/pc toggle
image(mobilepcpng,btn1.x,btn1.y,btn1.width,btn1.height);
textSize(12);
text("mobile/\npc",btn1.x+5,btn1.y+7);
    
     
     
    //end of level fade out
    for (var i = 0; i < blocks.length; i++){

        if(blocks[i].animation){
            fill(0, 0, 0,blocks[i].animation);
            rect(0, 0, width, height);
        }
    }
    //q 81
    //w 87
    //n 78
      if(key_pressed[81]&&key_pressed[87]&&key_pressed[78]) {
          
          
          image(thumnail,0,0,600,400);
          
          pixel("PIXEL WORLD",0,0,50,color(255,255,255));
          pixel("CHRISTMAS UPDATE",0,350,34,color(255,255,0));
          
      }
      
     
};
 
mouseClicked = function() {
    
    
    
    btn1.handleMouseClick();
 
};

      
      
      
    }};
  var canvas = document.getElementById("mycanvas"); 
 
  var processingInstance = new Processing(canvas, programCode); 
  </script>
</html>
